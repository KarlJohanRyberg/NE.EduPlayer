if(null===NE||void 0===NE)var NE={};(null===NE.Plugin||void 0===NE.Plugin)&&(NE.Plugin={}),NE.Plugin.page=function(i_params){function _addToDOM(i_content){_params.node.replaceWith(i_content)}function _onCompnentsLoad(){_componentsLoaded++,_componentsLoaded==_numComponents&&_pageComplete()}function _buildPage(i_html){$("#"+NE.Constants.PAGE_ID_PREFIX+_settings.chapterIndex+"-"+_settings.index).html(i_html),_numComponents=$(".NE-plugin-container",_myDOMContent.first()).length,_numComponents>0?NE.Plugin.LoadAll(_myDOMContent.first(),_onCompnentsLoad):_pageComplete()}function _pageComplete(){_settings.starthidden===!0&&_myDOMContent.first().addClass("hidden"),_settings.stopprogress===!0&&_myDOMContent.first().addClass("NE-nav-hidden"),me.OnLoaded({chapter:_settings.chapterIndex,index:_settings.index,guid:_settings.guid})}var _myDOMContent,_params=i_params,_settings={},_numComponents=0,_componentsLoaded=0,me={Name:"page",Dependencies:["page.css"],Init:function(){_settings=_params.settings,NE.Plugin.ApplyTemplate(this,function(data){_myDOMContent=$(data),_addToDOM(_myDOMContent),_settings.datafile?NE.Net.LoadTxtFile(_settings.datafile,function(htmlData){_buildPage(htmlData)}):_pageComplete()})},RenderPage:function(params){var returnVal="",firstData=params[0].data,initClasses=" "+_settings.initclasses||"",fileName=_settings.datafile;return fileName=fileName.split("/"),fileName=fileName[fileName.length-1],firstData=firstData.replace(/{datafile}/g,fileName),firstData=firstData.replace(/{ID}/g,_settings.ID),firstData=firstData.replace(/{initclasses}/g,initClasses),firstData=firstData.replace(/{index}/g,_settings.index),firstData=firstData.replace(/{chapterIndex}/g,_settings.chapterIndex),firstData=firstData.replace(/{group}/g,_settings.group),returnVal+=firstData,returnVal+=params[1].data},OnLoaded:function(){},eof:null};return me};